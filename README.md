私人图床系统 - 使用说明

项目简介

私人图床系统是一个基于PHP开发的图片托管平台，具有简洁的黑白设计风格和安全的TOTP双重验证功能。系统支持拖拽上传、图片预览、链接复制等功能，适合个人或小团队使用。

⚠️ 免责声明

重要声明

1. 作者免责：本软件按"原样"提供，作者不提供任何明示或暗示的担保，包括但不限于对适销性、特定用途适用性和非侵权的担保。作者不对使用本软件产生的任何直接、间接、偶然、特殊、典型或重大损害承担责任，包括但不限于数据丢失、利润损失或业务中断。
2. 使用风险：用户使用本脚本即表示理解并同意，使用本软件存在一定风险，包括但不限于：
   · 服务器安全风险
   · 数据丢失或泄露风险
   · 系统兼容性问题
   · 其他不可预见的风险
   用户需自行承担使用本软件的一切风险和责任。
3. 合法使用：用户承诺仅将本软件用于合法用途，严禁使用本软件：
   · 从事任何违法活动
   · 传播非法内容
   · 侵犯他人知识产权
   · 进行网络攻击或其他恶意行为
   · 产生任何非法利益
4. 责任承担：如因使用本软件导致任何法律纠纷或损失，用户应自行承担全部责任，作者不承担任何赔偿责任或连带责任。
5. 技术限制：本软件可能存在技术缺陷或安全漏洞，用户应在充分了解这些风险的前提下使用，并采取适当的安全措施。

使用前提

重要：继续使用本软件即表示您已阅读、理解并同意上述免责条款的全部内容。如您不同意这些条款，请立即停止使用本软件。

---

功能特点

· 🖼️ 图片上传：支持拖拽和点击上传
· 🔒 安全访问：TOTP双重验证保护
· 📱 响应式设计：适配各种设备屏幕
· 🎨 黑白风格：简洁优雅的视觉设计
· 🔗 一键复制：快速复制图片链接
· 📋 图片库管理：查看所有已上传图片
· ⚡ 实时预览：上传后立即预览图片

系统要求

· PHP 5.6+（推荐PHP 7.0+）
· FTP扩展支持
· 支持会话管理
· 现代浏览器支持

安装部署

1. 文件准备

将以下文件上传到你的Web服务器：

· index.php - 主程序文件（包含TOTP验证）
· upload.php - 图片上传处理
· gallery.php - 图片库显示

2. 配置FTP连接

编辑 upload.php 和 gallery.php 文件，修改FTP配置部分：

```php
$ftp_config = array(
    'host' => '你的FTP主机地址',      // 例如: ftp.example.com
    'user' => '你的FTP用户名',        // FTP用户名
    'pass' => '你的FTP密码',          // FTP密码
    'dir'  => '你的FTP图片目录',      // 例如: /public_html/images/
    'url'  => '你的网站域名'          // 例如: https://jzytc.ct.ws
);
```

重要提示：

· dir 是图片实际上传到FTP的目录
· url 是图片访问的域名，生成的链接格式为 域名/图片名

3. 配置TOTP验证

编辑 index.php 文件，设置TOTP密钥：

```php
$totp_secret = '你的TOTP密钥'; // 替换为你的Base32编码密钥
```

TOTP设置指南

生成TOTP密钥

1. 使用命令行工具：
   ```bash
   # 生成随机Base32密钥
   openssl rand -base64 20 | base32
   ```
2. 使用在线生成器：
   · 访问 TOTP密钥生成器
   · 生成并复制Base32密钥

配置身份验证器

1. 安装身份验证器应用：
   · Google Authenticator
   · Microsoft Authenticator
   · Authy
   · 或其他支持TOTP的应用
2. 添加新账户：
   · 选择"扫描二维码"或"手动输入"
   · 输入账户名称（如"图床系统"）
   · 输入TOTP密钥
   · 保存设置

使用说明

首次访问

1. 打开图床系统首页
2. 在身份验证器应用中获取6位验证码
3. 输入验证码完成身份验证
4. 系统会记住登录状态30分钟

上传图片

1. 拖拽上传：直接将图片文件拖到上传区域
2. 点击上传：点击"选择图片"按钮选择文件
3. 支持格式：JPG、PNG、GIF、BMP、WebP
4. 大小限制：单个文件不超过5MB

管理图片

· 查看图片库：页面底部显示所有已上传图片
· 复制链接：点击图片卡片的"复制链接"按钮
· 图片预览：上传后自动显示预览图

安全退出

点击右上角"退出登录"按钮，立即结束会话。

故障排除

常见问题

1. TOTP验证失败
   · 检查服务器时间是否准确
   · 确认TOTP密钥输入正确
   · 尝试前后30秒内的验证码
2. 图片上传失败
   · 检查FTP配置信息
   · 确认FTP目录存在且有写入权限
   · 检查文件大小是否超过限制
3. 图片链接无法访问
   · 确认网站域名配置正确
   · 检查图片是否成功上传到FTP
   · 验证网站根目录配置
4. 中文乱码问题
   · 确保所有文件使用UTF-8编码
   · 检查服务器字符集设置

日志查看

如需调试，可在PHP文件中添加错误日志：

```php
error_log('调试信息: ' . $variable);
```

查看服务器错误日志定位问题。

安全建议

1. 定期更换TOTP密钥
2. 使用强密码保护FTP账户
3. 限制图片上传大小
4. 定期检查系统日志
5. 保持PHP版本更新

文件结构

```
图床系统/
├── index.php          # 主程序文件（含TOTP验证）
├── upload.php         # 图片上传处理
├── gallery.php        # 图片库显示
└── README.md          # 说明文档
```

技术支持

如遇问题，请检查：

1. PHP错误日志
2. FTP连接状态
3. 文件权限设置
4. 服务器配置

版本信息

· 当前版本：v1.0
· 更新日期：2024年1月
· 兼容性：PHP 5.6+

---

最终用户协议

重要提示：本软件仅供学习和合法用途使用。使用者应对其行为承担全部法律责任。作者不对任何因使用本软件而产生的直接或间接损失负责。如果您继续使用本软件，即表示您已阅读、理解并同意接受上述所有条款和条件的约束。

禁止用途：严禁将本软件用于任何非法目的，包括但不限于传播违法内容、侵犯他人权益、进行网络攻击等行为。一经发现违法使用，作者有权终止提供技术支持，并配合相关部门进行调查。